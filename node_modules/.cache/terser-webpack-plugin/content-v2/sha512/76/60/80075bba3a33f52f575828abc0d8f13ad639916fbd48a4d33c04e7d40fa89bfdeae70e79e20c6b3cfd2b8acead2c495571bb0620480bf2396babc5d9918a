{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{\"7AKq\":function(t,n,e){\"use strict\";var r=e(\"mrSG\"),i=e(\"xoVG\"),o=e(\"26FU\"),u=e(\"ZZ/e\"),s=e(\"kyzu\"),a=e(\"0/uQ\"),c=e(\"F/XL\"),l=e(\"VNr4\"),f=e(\"15JJ\"),d=e(\"xMyE\"),h=e(\"2WpN\"),v=e(\"aeTR\"),p=e(\"t3/U\"),b=e(\"EksX\"),m=e(\"CcnG\"),g=e(\"iw74\"),w=e(\"t/Na\"),y=function(){function t(t,n,e,r,i,o,u){this.storage=t,this.http=n,this.toastController=e,this.alert=r,this.sesion=i,this.enlistment=o,this.requestService=u,this.uploading=!1}return t.prototype.checkForEvents=function(){var t=this;return Object(a.a)(this.sesion.getServicesOffline()).pipe(Object(f.a)(function(n){return null!=n&&null!=n?t.requestService.PostServiceApp(n).pipe(Object(d.a)(function(e){if(null!=e&&0==e.Retorno){var r=t.sesion.getServicesOffline();r=t.removeServices(n.guid,r),t.sesion.setServicesOfflineAll(r),t.toastController.create({message:\"datos sincronizados con el API!\",duration:3e3,position:\"top\"}).then(function(t){return t.present()})}}),Object(h.a)(function(){})):(console.log(\"no local events to sync\"),Object(c.a)(!1))}))},t.prototype.removeServices=function(t,n){return n.forEach(function(e,r){e.guid==t&&n.splice(r,1)}),n},t.prototype.storeRequest=function(t,n,e){var r=this;this.toastController.create({message:\"Your data is stored locally because you seem to be offline.\",duration:3e3,position:\"bottom\"}).then(function(t){return t.present()});var i={url:t,type:n,data:e,time:(new Date).getTime(),id:Math.random().toString(36).replace(/[^a-z]+/g,\"\").substr(0,5)};return this.storage.get(\"storedreq\").then(function(t){var n=JSON.parse(t);return n?n.push(i):n=[i],r.storage.set(\"storedreq\",JSON.stringify(n))})},t.prototype.sendRequests=function(t){for(var n=[],e=0,r=t;e<r.length;e++){var i=r[e],o=this.http.request(i.type,i.url,i.data);n.push(o)}return Object(l.a)(n)},t.prototype.checkEventsPendings=function(){return r.b(this,void 0,void 0,function(){var t,n,e,i,o;return r.e(this,function(r){switch(r.label){case 0:return[4,this.sesion.GetNewOfflineEnlistment()];case 1:t=r.sent(),r.label=2;case 2:if(r.trys.push([2,9,,10]),null==t||null==t||0!=this.uploading)return[3,7];t.forEach(function(t){t.sending=!0}),this.sesion.SetNewOfflineEnlistment(null),n=0,e=t,r.label=3;case 3:return n<e.length?(this.alert.presentToast(\"Sincronizando alistamientos para veh\\xedculo \"+(i=e[n]).IdVehiculo+\" y kilometraje \"+i.Kilometraje,5e3),this.uploading=!0,[4,this.enlistment.PostAnswer(i).toPromise()]):[3,6];case 4:o=r.sent(),t.indexOf(i)==t.length-1&&(this.uploading=!1),0==o.Retorno?(i.sending=!1,this.alert.showAlert(\"Alistamiento enviado, kilometraje \"+i.Kilometraje,o.message)):(i.sending=!1,this.alert.showAlert(\"Error sincronzando\",o.TxtError)),r.label=5;case 5:return n++,[3,3];case 6:return[3,8];case 7:this.uploading=!1,r.label=8;case 8:return null!=t&&this.sesion.SetNewOfflineEnlistment(t.filter(function(t){return 1==t.sending})),[3,10];case 9:return r.sent(),this.sesion.SetNewOfflineEnlistment(t.filter(function(t){return 1==t.sending})),this.uploading=!1,this.alert.presentToast(\"error sincronizando...\",5e3),[3,10];case 10:return[2]}})})},t.ngInjectableDef=m.Qb({factory:function(){return new t(m.Rb(g.b),m.Rb(w.c),m.Rb(u.Nb),m.Rb(s.a),m.Rb(v.a),m.Rb(p.a),m.Rb(b.a))},token:t,providedIn:\"root\"}),t}();e.d(n,\"a\",function(){return E}),e.d(n,\"b\",function(){return O});var E=function(t){return t[t.Online=0]=\"Online\",t[t.Offline=1]=\"Offline\",t}({}),O=function(){function t(t,n,e,r,i,u){var s=this;this.network=t,this.toastController=n,this.plt=e,this.alert=r,this._offline=i,this._sesion=u,this.status=new o.a(E.Online),console.log(\"INICIALIZA RED\"),this.plt.ready().then(function(){var t=\"none\"!==s.network.type?E.Online:E.Offline;s.initializeNetworkEvents(),s.status.next(t)})}return t.prototype.initializeNetworkEvents=function(){var t=this;this.network.onDisconnect().subscribe(function(){t.status.getValue()===E.Online&&t.updateNetworkStatus(E.Offline)}),this.network.onConnect().subscribe(function(){t.SyncOnConnect()})},t.prototype.updateNetworkStatus=function(t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){return this.status.next(t),this.toastController.create({message:\"Est\\xe1s en modo \"+(t==E.Offline?\"Offline\":\"Online\"),duration:3e3,position:\"bottom\"}).then(function(t){return t.present()}),t==E.Online&&this._offline.checkEventsPendings(),[2]})})},t.prototype.onNetworkChange=function(){return this.status.asObservable()},t.prototype.SyncOnConnect=function(){(this._sesion.GetMobile()||this._sesion.GetWifi())&&(this.alert.presentToast(\"wifi\"==this.network.type?\"Conexi\\xf3n WIFI permitida\":\"Conexi\\xf3n 3G/4G permitida\",4e3),this._offline.checkEventsPendings())},t.prototype.getCurrentNetworkStatus=function(){var t=\"none\"!==this.network.type?E.Online:E.Offline;if(\"wifi\"===this.network.type){if(!this._sesion.GetWifi())return this.updateNetworkStatus(E.Offline),E.Offline}else if(!this._sesion.GetMobile())return this.updateNetworkStatus(E.Offline),E.Offline;return this.updateNetworkStatus(t),this.status.getValue()},t.ngInjectableDef=m.Qb({factory:function(){return new t(m.Rb(i.a),m.Rb(u.Nb),m.Rb(u.Ib),m.Rb(s.a),m.Rb(y),m.Rb(v.a))},token:t,providedIn:\"root\"}),t}()},Byms:function(t,n,e){\"use strict\";e.d(n,\"a\",function(){return r});var r=function(){return function(){}}()},CBt4:function(t,n,e){\"use strict\";e.d(n,\"a\",function(){return i}),e.d(n,\"b\",function(){return o});var r=e(\"mrSG\"),i=function(t,n,e,i,o){return r.b(void 0,void 0,void 0,function(){var u;return r.e(this,function(r){switch(r.label){case 0:if(t)return[2,t.attachViewToDom(n,e,o,i)];if(\"string\"!=typeof e&&!(e instanceof HTMLElement))throw new Error(\"framework delegate is missing\");return u=\"string\"==typeof e?n.ownerDocument&&n.ownerDocument.createElement(e):e,i&&i.forEach(function(t){return u.classList.add(t)}),o&&Object.assign(u,o),n.appendChild(u),u.componentOnReady?[4,u.componentOnReady()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,u]}})})},o=function(t,n){if(n){if(t)return t.removeViewFromDom(n.parentElement,n);n.remove()}return Promise.resolve()}},CUEh:function(t,n,e){\"use strict\";e.d(n,\"a\",function(){return y}),e.d(n,\"b\",function(){return g}),e.d(n,\"c\",function(){return E}),e.d(n,\"d\",function(){return u});var r=e(\"mrSG\"),i=e(\"aiep\"),o=e(\"JpGC\"),u=function(t){return new Promise(function(n,e){Object(i.n)(function(){s(t),a(t).then(function(e){e.animation&&e.animation.destroy(),c(t),n(e)},function(n){c(t),e(n)})})})},s=function(t){var n=t.enteringEl,e=t.leavingEl;O(n,e,t.direction),t.showGoBack?n.classList.add(\"can-go-back\"):n.classList.remove(\"can-go-back\"),E(n,!1),e&&E(e,!1)},a=function(t){return r.b(void 0,void 0,void 0,function(){var n;return r.e(this,function(e){switch(e.label){case 0:return[4,l(t)];case 1:return[2,(n=e.sent())?f(n,t):d(t)]}})})},c=function(t){var n=t.leavingEl;t.enteringEl.classList.remove(\"ion-page-invisible\"),void 0!==n&&n.classList.remove(\"ion-page-invisible\")},l=function(t){return r.b(void 0,void 0,void 0,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return t.leavingEl&&t.animated&&0!==t.duration?t.animationBuilder?[2,t.animationBuilder]:\"ios\"!==t.mode?[3,2]:[4,e.e(105).then(e.bind(null,\"z1VC\"))]:[2,void 0];case 1:return n=r.sent().iosTransitionAnimation,[3,4];case 2:return[4,e.e(106).then(e.bind(null,\"jNcL\"))];case 3:n=r.sent().mdTransitionAnimation,r.label=4;case 4:return[2,n]}})})},f=function(t,n){return r.b(void 0,void 0,void 0,function(){var i,o;return r.e(this,function(r){switch(r.label){case 0:return[4,h(n,!0)];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,5,,6]),[4,e.e(6).then(e.bind(null,\"5GEt\"))];case 3:return[4,r.sent().create(t,n.baseEl,n)];case 4:return i=r.sent(),[3,6];case 5:return r.sent(),i=t(n.baseEl,n),[3,6];case 6:return b(n.enteringEl,n.leavingEl),[4,p(i,n)];case 7:return o=r.sent(),i.hasCompleted=o,n.progressCallback&&n.progressCallback(void 0),i.hasCompleted&&m(n.enteringEl,n.leavingEl),[2,{hasCompleted:i.hasCompleted,animation:i}]}})})},d=function(t){return r.b(void 0,void 0,void 0,function(){var n,e;return r.e(this,function(r){switch(r.label){case 0:return n=t.enteringEl,e=t.leavingEl,[4,h(t,!1)];case 1:return r.sent(),b(n,e),m(n,e),[2,{hasCompleted:!0}]}})})},h=function(t,n){return r.b(void 0,void 0,void 0,function(){var e;return r.e(this,function(r){switch(r.label){case 0:return e=(void 0!==t.deepWait?t.deepWait:n)?[y(t.enteringEl),y(t.leavingEl)]:[w(t.enteringEl),w(t.leavingEl)],[4,Promise.all(e)];case 1:return r.sent(),[4,v(t.viewIsReady,t.enteringEl)];case 2:return r.sent(),[2]}})})},v=function(t,n){return r.b(void 0,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return t?[4,t(n)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},p=function(t,n){var e=n.progressCallback,r=new Promise(function(n){return t.onFinish(n)});return e?(t.progressStart(!0),e(t)):t.play(),r},b=function(t,n){g(n,o.c),g(t,o.a)},m=function(t,n){g(t,o.b),g(n,o.d)},g=function(t,n){if(t){var e=new CustomEvent(n,{bubbles:!1,cancelable:!1});t.dispatchEvent(e)}},w=function(t){return t&&t.componentOnReady?t.componentOnReady():Promise.resolve()},y=function(t){return r.b(void 0,void 0,void 0,function(){var n;return r.e(this,function(e){switch(e.label){case 0:return(n=t)?null==n.componentOnReady?[3,2]:[4,n.componentOnReady()]:[3,4];case 1:if(null!=e.sent())return[2];e.label=2;case 2:return[4,Promise.all(Array.from(n.children).map(y))];case 3:e.sent(),e.label=4;case 4:return[2]}})})},E=function(t,n){n?(t.setAttribute(\"aria-hidden\",\"true\"),t.classList.add(\"ion-page-hidden\")):(t.hidden=!1,t.removeAttribute(\"aria-hidden\"),t.classList.remove(\"ion-page-hidden\"))},O=function(t,n,e){void 0!==t&&(t.style.zIndex=\"back\"===e?\"99\":\"101\"),void 0!==n&&(n.style.zIndex=\"100\")}},XEN7:function(t,n,e){\"use strict\";e.d(n,\"a\",function(){return r});var r=function(){return function(){}}()},hpAr:function(t,n,e){\"use strict\";e.d(n,\"a\",function(){return r});var r=function(t){try{if(\"string\"!=typeof t||\"\"===t)return t;var n=document.createDocumentFragment(),e=document.createElement(\"div\");n.appendChild(e),e.innerHTML=t,s.forEach(function(t){for(var e=n.querySelectorAll(t),r=e.length-1;r>=0;r--){var u=e[r];u.parentNode?u.parentNode.removeChild(u):n.removeChild(u);for(var s=o(u),a=0;a<s.length;a++)i(s[a])}});for(var r=o(n),u=0;u<r.length;u++)i(r[u]);var a=document.createElement(\"div\");a.appendChild(n);var c=a.querySelector(\"div\");return null!==c?c.innerHTML:a.innerHTML}catch(l){return console.error(l),\"\"}},i=function(t){if(!t.nodeType||1===t.nodeType){for(var n=t.attributes.length-1;n>=0;n--){var e=t.attributes[n],r=e.name;if(u.includes(r.toLowerCase())){var s=e.value;null!=s&&s.toLowerCase().includes(\"javascript:\")&&t.removeAttribute(r)}else t.removeAttribute(r)}var a=o(t);for(n=0;n<a.length;n++)i(a[n])}},o=function(t){return null!=t.children?t.children:t.childNodes},u=[\"class\",\"id\",\"href\",\"src\",\"name\",\"slot\"],s=[\"script\",\"style\",\"iframe\",\"meta\",\"link\",\"object\",\"embed\"]},iDXa:function(t,n,e){\"use strict\";e.d(n,\"a\",function(){return r});var r=function(){return function(){}}()},\"j5a+\":function(t,n,e){\"use strict\";e.d(n,\"a\",function(){return o}),e.d(n,\"b\",function(){return u}),e.d(n,\"c\",function(){return i}),e.d(n,\"d\",function(){return a});var r=e(\"mrSG\"),i=function(t,n){return null!==n.closest(t)},o=function(t){var n;return\"string\"==typeof t&&t.length>0?((n={\"ion-color\":!0})[\"ion-color-\"+t]=!0,n):void 0},u=function(t){var n={};return function(t){return void 0!==t?(Array.isArray(t)?t:t.split(\" \")).filter(function(t){return null!=t}).map(function(t){return t.trim()}).filter(function(t){return\"\"!==t}):[]}(t).forEach(function(t){return n[t]=!0}),n},s=/^[a-z][a-z0-9+\\-.]*:/,a=function(t,n,e){return r.b(void 0,void 0,void 0,function(){var i;return r.e(this,function(r){return null!=t&&\"#\"!==t[0]&&!s.test(t)&&(i=document.querySelector(\"ion-router\"))?(null!=n&&n.preventDefault(),[2,i.push(t,e)]):[2,!1]})})}},k0If:function(t,n,e){\"use strict\";e.d(n,\"a\",function(){return r}),e.d(n,\"b\",function(){return i});var r=function(){return function(t,n){this.x=t,this.y=n}}(),i=function(t,n,e,r,i){var s=u(t.y,n.y,e.y,r.y,i);return o(t.x,n.x,e.x,r.x,s[0])},o=function(t,n,e,r,i){return i*(3*n*Math.pow(i-1,2)+i*(-3*e*i+3*e+r*i))-t*Math.pow(i-1,3)},u=function(t,n,e,r,i){return s((r-=i)-3*(e-=i)+3*(n-=i)-(t-=i),3*e-6*n+3*t,3*n-3*t,t).filter(function(t){return t>=0&&t<=1})},s=function(t,n,e,r){if(0===t)return function(t,n,e){var i=n*n-4*t*r;return i<0?[]:[(-n+Math.sqrt(i))/(2*t),(-n-Math.sqrt(i))/(2*t)]}(n,e);var i=(3*(e/=t)-(n/=t)*n)/3,o=(2*n*n*n-9*n*e+27*(r/=t))/27;if(0===i)return[Math.pow(-o,1/3)];if(0===o)return[Math.sqrt(-i),-Math.sqrt(-i)];var u=Math.pow(o/2,2)+Math.pow(i/3,3);if(0===u)return[Math.pow(o/2,.5)-n/3];if(u>0)return[Math.pow(-o/2+Math.sqrt(u),1/3)-Math.pow(o/2+Math.sqrt(u),1/3)-n/3];var s=Math.sqrt(Math.pow(-i/3,3)),a=Math.acos(-o/(2*Math.sqrt(Math.pow(-i/3,3)))),c=2*Math.pow(s,1/3);return[c*Math.cos(a/3)-n/3,c*Math.cos((a+2*Math.PI)/3)-n/3,c*Math.cos((a+4*Math.PI)/3)-n/3]}},l1ru:function(t,n,e){\"use strict\";e.d(n,\"a\",function(){return r}),e.d(n,\"b\",function(){return a}),e.d(n,\"c\",function(){return s}),e.d(n,\"d\",function(){return d}),e.d(n,\"e\",function(){return h}),e.d(n,\"f\",function(){return o}),e.d(n,\"g\",function(){return i}),e.d(n,\"h\",function(){return f}),e.d(n,\"i\",function(){return c}),e.d(n,\"j\",function(){return l}),e.d(n,\"k\",function(){return u});var r=function(t){\"requestIdleCallback\"in window?window.requestIdleCallback(t):setTimeout(t,32)},i=function(t){return!!t.shadowRoot&&!!t.attachShadow},o=function(t){var n=t.closest(\"ion-item\");return n?n.querySelector(\"ion-label\"):null},u=function(t,n,e,r,o){if(t||i(n)){var u=n.querySelector(\"input.aux-input\");u||((u=n.ownerDocument.createElement(\"input\")).type=\"hidden\",u.classList.add(\"aux-input\"),n.appendChild(u)),u.disabled=o,u.name=e,u.value=r||\"\"}},s=function(t,n,e){return Math.max(t,Math.min(n,e))},a=function(t,n){if(!t){var e=\"ASSERT: \"+n;throw console.error(e),new Error(e)}},c=function(t){return t.timeStamp||Date.now()},l=function(t){if(t){var n=t.changedTouches;if(n&&n.length>0){var e=n[0];return{x:e.clientX,y:e.clientY}}if(void 0!==t.pageX)return{x:t.pageX,y:t.pageY}}return{x:0,y:0}},f=function(t){var n=\"rtl\"===document.dir;switch(t){case\"start\":return n;case\"end\":return!n;default:throw new Error('\"'+t+'\" is not a valid value for [side]. Use \"start\" or \"end\" instead.')}},d=function(t,n){var e=t._original||t;return{_original:t,emit:h(e.emit.bind(e),n)}},h=function(t,n){var e;return void 0===n&&(n=0),function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];clearTimeout(e),e=setTimeout.apply(void 0,[t,n].concat(r))}}},nqKE:function(t,n,e){\"use strict\";e.d(n,\"a\",function(){return r});var r=function(){return function(){this.CentrocostosNombre=\"\"}}()},s2pH:function(t,n,e){\"use strict\";e.d(n,\"a\",function(){return i}),e.d(n,\"b\",function(){return o}),e.d(n,\"c\",function(){return u}),e.d(n,\"d\",function(){return r});var r=function(){var t=window.TapticEngine;t&&t.selection()},i=function(){var t=window.TapticEngine;t&&t.gestureSelectionStart()},o=function(){var t=window.TapticEngine;t&&t.gestureSelectionChanged()},u=function(){var t=window.TapticEngine;t&&t.gestureSelectionEnd()}},\"t3/U\":function(t,n,e){\"use strict\";e.d(n,\"a\",function(){return s});var r=e(\"BOy9\"),i=e(\"aeTR\"),o=e(\"CcnG\"),u=e(\"t/Na\"),s=function(){function t(t,n,e){this._http=t,this._sesion=n,this.http=e}return t.prototype.GetQuestions=function(t,n){return this._http.Get(\"/Question?business=\"+t.CodigoEmpresa+\"&user=\"+n.Identificacion)},t.prototype.PostAnswer=function(t){return this._http.PostRequest(\"/vehicle\",t)},t.prototype.PostAnswerHeavy=function(t){return this._http.PostRequestHeavy(\"/vehicle\",t)},t.prototype.CheckEnlistment=function(t){var n=!0,e=this._sesion.GetQuestions();return t.detalle.forEach(function(t){var r=e.filter(function(n){return n.PNo==t.PNo});t.Respuesta!=r[0].respuesta&&1==r[0].Restringe&&(n=!1)}),n},t.ngInjectableDef=o.Qb({factory:function(){return new t(o.Rb(r.a),o.Rb(i.a),o.Rb(u.c))},token:t,providedIn:\"root\"}),t}()},\"zR9+\":function(t,n,e){\"use strict\";e.d(n,\"a\",function(){return r});var r=function(){return function(){}}()}}]);","extractedComments":[]}